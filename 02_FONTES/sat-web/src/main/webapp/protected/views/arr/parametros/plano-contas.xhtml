<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
        xmlns:h="http://xmlns.jcp.org/jsf/html"
        xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
        xmlns:f="http://java.sun.com/jsf/core"
        xmlns:p="http://xmlns.jcp.org/jsf/passthrough"
        xmlns:to="http://sefaz.to.gov.br/composites"
        xmlns:b="http://bootsfaces.net/ui"
        >

    <ui:composition template="/protected/views/templates/views/default-template.xhtml">
        <ui:param name="pageTitle" value="Sefaz-to - Home"/>
        <ui:define name="content">
            <div id="bodydiv" class="col-md-12">
                <to:tabela id="customTable"
                           title="PARAMETRIZAÇÃO DO PLANO DE CONTAS"
                           bean="#{planoContasMB}"
                           headers="Código do Plano,
                                    Descrição,
                                    Código Contábil,
                                    Tipo de Conta,
                                    Conta Hierárquica,
                                    Situação"
                           fields="idPlanocontas,nomeConta,codigoContabil,tipoConta,contaHierarquica,situacao.label"
                           delete="idPlanocontas"
                           select="idPlanocontas"
                           selectTarget="bform"
                           paginable="true"/>

                
                <div class="panel panel-default">
                    <div class="panel-heading"><h3 class="panel-title">Plano de Contas</h3></div>                            
                    <h:form id="bform" class="panel-body">
                        <div class="row">
                            <div class="form-group col-md-2">
                                <h:outputLabel for="codigo">Código do Plano*</h:outputLabel>
                                <h:inputText value="#{planoContasMB.dto.idPlanocontas}" id="codigo"
                                        styleClass="form-control" required="true" requiredMessage="Código do banco é obrigatório"
                                        p:data-mask="9?999"/>
                            </div>
                            <div class="form-group col-md-4">
                                <h:outputLabel for="nome">Descrição do Plano*</h:outputLabel>
                                <h:inputText value="#{planoContasMB.dto.nomeConta}" id="nome"
                                        styleClass="form-control" required="true" requiredMessage="Nome do banco é obrigatório"
                                        maxlength="150" />
                            </div>
                            <div class="form-group col-md-2">
                                <h:outputLabel for="contaHierarquica">Conta Hierárquica</h:outputLabel>
                                <h:inputText value="#{planoContasMB.dto.contaHierarquica}" id="contaHierarquica"
                                        styleClass="form-control" required="true" requiredMessage="É obrigatório preencher os 8 dígitos da Raíz do CNPJ"
                                        maxlength="8"
                                        p:data-mask="99999999" />
                            </div>
                            <div class="form-group col-md-2">
                                <h:outputLabel for="codigoContabil">Conta Contábil</h:outputLabel>
                                <h:inputText value="#{planoContasMB.dto.codigoContabil}" id="codigoContabil"
                                        styleClass="form-control" required="true" requiredMessage="É obrigatório preencher os 8 dígitos da Raíz do CNPJ"
                                        maxlength="8"
                                        p:data-mask="99999999" />
                            </div>
                            <div class="form-group col-md-2">
                                <h:outputLabel for="tipoConta">Tipo de Conta*</h:outputLabel>
                                <h:selectOneMenu value="#{planoContasMB.dto.tipoConta}" id="tipoConta"
                                        styleClass="form-control">
                                    <f:selectItem itemValue="1" itemLabel="Sintética"/>
                                    <f:selectItem itemValue="2" itemLabel="Analítica"/>
                                </h:selectOneMenu>
                            </div>
                        </div>                        
                        <div class="row">
                            <div class="form-group col-md-4">
                                <h:outputLabel for="situacao">Situação*</h:outputLabel>
                                    <h:selectOneMenu value="#{planoContasMB.dto.situacao}" id="situacao"
                                            styleClass="form-control">
                                        <f:selectItem itemValue="1" itemLabel="Ativo"/>
                                        <f:selectItem itemValue="2" itemLabel="Cancelado"/>
                                    </h:selectOneMenu>
                            </div>
                            <div class="form-group col-md-4">
                                <h:outputLabel for="grupoCnae">Grupo de CNAE</h:outputLabel>
                                <h:selectOneMenu value="#{planoContasMB.dto.idGrupoCnae}" id="grupoCnae"
                                        styleClass="form-control">
                                    <f:selectItems value="#{planoContasMB.listTipoGruposCnae}"
                                                   var="tipoGrupoCnae" 
                                                   itemLabel="#{tipoGrupoCnae.descricaoGrupo}"
                                                   itemValue="#{tipoGrupoCnae.idGrupoCnae}" />
                                </h:selectOneMenu>
                            </div>
                        
                            <div class="col-md-4 text-right">
                                <button type="button" onclick="clearFields('bodydiv');"
                                        class="btn btn-primary">Novo Plano</button>
                                <h:commandButton value="Salvar" styleClass="btn btn-primary"
                                        action="#{planoContasMB.save()}">
                                    <f:ajax render="customTable bform"
                                            execute="codigo nome cnpj situacao"/>
                                </h:commandButton>
                            </div>
                        </div>
                    </h:form>                                
                </div>
                        
            </div>
        </ui:define>
    </ui:composition>

</html>
